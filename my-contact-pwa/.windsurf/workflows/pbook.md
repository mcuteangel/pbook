---
description: # 📒 Pbook - اپلیکیشن مدیریت مخاطبین PWA پیشرفته  سلام به دنیای "Pbook"! 👋 این پروژه یه تلاش هیجان‌انگیز برای ساختن یه اپلیکیشن PWA (Progressive Web App) خیلی قدرتمند و کاربردی برای مدیریت مخاطبین شماست. هدفمون اینه که یه تجربه کاربری فوق‌العاده روا
---

# توسعه یک PWA مدیریت مخاطبین پیشرفته

هدف اصلی: ساخت یک برنامه Progressive Web App (PWA) کاربرپسند، قابل نصب و با عملکرد قوی برای مدیریت اطلاعات مخاطبین با تمرکز بر تجربه کاربری روان، قابلیت‌های آفلاین، و استفاده از تاریخ شمسی.

## ویژگی‌های کلیدی PWA

- **دسترسی آفلاین قوی:**
  - قابلیت نمایش لیست موجود مخاطبین و جستجو در آن‌ها حتی بدون اتصال به اینترنت.
  - ذخیره تغییرات (ویرایش/افزودن/حذف) در حالت آفلاین و همگام‌سازی خودکار آن‌ها با سرور یا فضای ذخیره‌سازی اصلی به محض برقراری اتصال اینترنت.
  - استفاده از Service Workerها برای مدیریت کش و همگام‌سازی پس‌زمینه.
  - استفاده از IndexedDB یا Web SQL API برای ذخیره‌سازی داده‌ها در سمت کلاینت.
- **یکپارچگی با قابلیت‌های دستگاه:**
  - امکان برقراری تماس با کلیک مستقیم روی شماره تلفن (استفاده از پروتکل tel:).
  - امکان باز کردن آدرس در برنامه نقشه‌ی پیش‌فرض دستگاه با کلیک روی فیلد آدرس (استفاده از پروتکل geo: یا لینک به Google Maps/OpenStreetMap).
  - پشتیبانی از قابلیت "Add to Home Screen" یا نصب برنامه روی دستگاه.
- **تقویم و تاریخ شمسی:**
  - تمام نمایش‌های تاریخ در برنامه باید به صورت شمسی باشد.
  - در هر جایی که نیاز به انتخاب تاریخ وجود دارد (مانند فیلتر بر اساس تاریخ، افزودن فیلد سفارشی تاریخ تولد و...)، از یک تقویم داخلی شمسی استفاده شود.

## قابلیت‌های اصلی مورد نیاز

- **فرم تماس (ContactForm.vue):**

  - [x] بهبود جامع ولیدیشن‌ها (شماره‌های اضافی، تاریخ تولد، نام گروه جدید)
  - [x] افزودن فیلد "سمت/تخصص" (Position/Expertise)
  - [x] افزودن فیلد "آواتار" (Avatar) با قابلیت آپلود، پیش‌نمایش و حذف
  - [x] ثبت خودکار تاریخ و زمان ایجاد (`createdAt`) و آخرین ویرایش (`updatedAt`)

- **ثبت مخاطب جدید:** ارائه فرمی کامل برای افزودن تمام فیلدهای اطلاعاتی مشخص شده برای یک مخاطب جدید.
- **ویرایش اطلاعات مخاطبین:** امکان انتخاب یک مخاطب و به‌روزرسانی اطلاعات آن از طریق فرم ویرایش.
- **حذف مخاطبین:** قابلیت انتخاب یک یا چند مخاطب از لیست و حذف آن‌ها با تاییدیه.
- **نمایش و جستجو:**
  - نمایش لیست تمام مخاطبین.
  - قابلیت جستجوی بلادرنگ و سریع در لیست مخاطبین بر اساس نام، نام خانوادگی، شماره تلفن، یا سایر فیلدهای کلیدی.
  - پیاده‌سازی اسکرول روان (Smooth Scrolling) برای لیست‌های طولانی.
  - پیاده‌سازی صفحه بندی (Pagination) برای مدیریت و نمایش بهینه لیست‌های با تعداد مخاطب بالا، به خصوص برای کاهش بار اولیه.
- **مرتب‌سازی:**
  - قابلیت مرتب‌سازی لیست مخاطبین بر اساس "گروه" و "نام خانوادگی" در فاز اول.
  - امکان مرتب‌سازی هر فیلد به صورت صعودی و نزولی (الفبا/عدد/تاریخ).
  - معماری قابلیت مرتب‌سازی به گونه‌ای که در آینده بتوان فیلدهای دیگر را نیز به گزینه‌های مرتب‌سازی اضافه کرد.

## جزئیات اطلاعات هر مخاطب

هر رکورد مخاطب باید حداقل شامل فیلدهای زیر باشد:

- نام (متن)
- نام خانوادگی (متن)
- تلفن (شماره اصلی) (متن - با اعتبارسنجی فرمت شماره تلفن)
- گروه (انتخاب از لیست موجود یا ایجاد گروه جدید - اشاره به بخش مدیریت گروه‌ها)
- سمت/تخصص (متن - اختیاری)
- جنسیت (انتخاب از گزینه‌ها - اختیاری)
- شماره‌های اضافی (آرایه‌ای از متن - امکان افزودن 2 تا 3 شماره دیگر)
- یادداشت/توضیحات (متن چند خطی - اختیاری)
- عکس یا آواتار (فایل تصویری - اختیاری، ذخیره‌سازی در سمت کلاینت یا با امکان همگام‌سازی)
- آدرس:
  - فیلدهای ساختاریافته (مثلاً آرایه‌ای از اشیاء شامل فیلدهایی مانند: نوع آدرس (خانه، محل کار)، کشور، استان، شهر، خیابان، پلاک، واحد، کد پستی، یادداشت آدرس).
  - قابلیت ثبت چندین آدرس برای هر مخاطب.
- تاریخ و زمان ایجاد مخاطب (ثبت خودکار در زمان ایجاد، با فرمت تاریخ شمسی و زمان)
- تاریخ و زمان آخرین ویرایش مخاطب (به‌روزرسانی خودکار در زمان هر ویرایش، با فرمت تاریخ شمسی و زمان)
- فیلدهای سفارشی:
  - امکان تعریف فیلدهای جدید توسط کاربر (مثلاً تاریخ تولد، وبسایت، حساب شبکه‌های اجتماعی، فیلدهای متنی، عددی، تاریخ، گزینه‌ای).
  - تعیین نوع داده (متن، عدد، تاریخ شمسی، لیست گزینه‌ای).
  - قابلیت جستجو و فیلتر بر اساس فیلدهای سفارشی.

## مدیریت گروه‌ها

- فیلد "گروه" در فرم ثبت/ویرایش مخاطب باید به صورت کشویی (Dropdown/Select) باشد.
- در همین بخش کشویی، گزینه‌ای برای "ایجاد گروه جدید" وجود داشته باشد که با انتخاب آن، کاربر بتواند نام یک گروه جدید را وارد و ثبت کند بدون خروج از صفحه ثبت/ویرایش مخاطب.
- امکان مدیریت لیست کامل گروه‌ها (مشاهده، ویرایش نام، حذف گروه) در یک بخش جداگانه (اختیاری در فاز اول، اما مطلوب).

## جنبه‌های فنی و طراحی

- استفاده از جدیدترین متدها و المان‌های طراحی وب روز (مانند Flexbox/Grid برای Layout، CSS Variables برای مدیریت Theme، طراحی واکنش‌گرا برای نمایش در اندازه‌های مختلف صفحه).
- استفاده از یک فریم‌ورک یا کتابخانه JavaScript مدرن (مانند React, Vue.js, Angular, Svelte) برای ساخت رابط کاربری و مدیریت وضعیت برنامه.
- مدیریت وضعیت (State Management) کارآمد برای اطمینان از همگام‌سازی داده‌ها بین بخش‌های مختلف برنامه و حالت‌های آفلاین/آنلاین.
- تمرکز بر سرعت بارگذاری اولیه برنامه و عملکرد روان.
- [x] پیاده‌سازی معماری ماژولار برای توسعه و نگهداری آسان‌تر.
- [x] تکمیل و بهبود فرم تماس (`ContactForm.vue`) شامل ولیدیشن‌های پیشرفته، فیلدهای جدید (سمت، آواتار) و مدیریت تاریخ‌ها.

## قابلیت‌های پیشنهادی برای توسعه‌های آینده (اختیاری اما مطلوب)

- [x] پشتیبان‌گیری و بازیابی: امکان Export گرفتن از کل اطلاعات مخاطبین (مثلاً در فرمت JSON یا CSV قابل دانلود محلی) و قابلیت Import کردن آن‌ها برای بازیابی.
- دسته‌بندی پیشرفته: بخش مدیریت گروه‌ها با قابلیت ایجاد زیرگروه‌ها، رنگ‌بندی گروه‌ها و...
- فیلتر پیشرفته: امکان فیلتر کردن لیست مخاطبین بر اساس ترکیب چند معیار (مثلاً گروه خاص و جنسیت مشخص و محدوده تاریخ ایجاد و فیلد سفارشی خاص).
- پیدا کردن و ادغام مخاطبین تکراری: الگوریتمی برای شناسایی مخاطبین مشابه (بر اساس نام، شماره تلفن و...) و ارائه ابزاری برای بررسی و ادغام دستی یا خودکار اطلاعات آن‌ها.
- پیشنهاد ذخیره مخاطب بدون شماره: هنگام جستجو یا ورودی که شماره تلفن اصلی پیدا نشد، پیشنهاد ثبت مخاطب در یک بخش مجزا (مثلاً با عنوان "بدون شماره" یا "سرنخ") با قابلیت افزودن یادداشت کنار آن و امکان تبدیل آن به مخاطب کامل در آینده.
- مدیریت سطوح دسترسی: تعریف نقش‌ها و سطوح دسترسی محدود برای کاربران مختلف (مفید برای استفاده‌های تیمی).
- تم‌های سفارشی: امکان انتخاب از بین چند تم بصری (روشن/تاریک/رنگی) یا قابلیت شخصی‌سازی محدود ظاهر.
- وارد کردن و خروجی گرفتن اطلاعات: قابلیت Import/Export اطلاعات از/به فرمت‌های رایج مانند اکسل (XLS/XLSX) یا CSV با پشتیبانی از تمام فیلدها (شامل فیلدهای سفارشی و آدرس ساختاریافته).
- [x] تنظیمات نمایش آدرس/ستون‌ها:
  - امکان تنظیم نمایش یا